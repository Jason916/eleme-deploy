{{ include('header.twig') }}

<div class="row">
    <div class="panel panel-default">
        <div class="panel-heading">Branch Deploy</div>
        <div class="panel-body">
            <form class="form-inline" role="form" action="/deploy/branch" method="post">
                <div class="form-group form-group-sm">
                    <label class="control-label" for="branch">Branch Name</label>
                    <input class="form-control input-sm" id="branch" name="branch" placeholder="Branch Name" value="{{ default_branch }}">
                </div>
                <div class="form-group">
                    <button type="submit" id="deployBranch" class="btn btn-sm btn-info">Deploy</button>
                </div>
            </form>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">Commit Deploy</div>
        <div class="panel-body">
            <form class="form-inline" role="form" action="/deploy/commit" method="post">
                <div class="form-group form-group-sm">
                    <label class="sr-only" for="commit">Commit Version</label>
                    <select class="form-control input-sm" id="s-commit" name="commit">
                        <option value="">Commit Version...</option>
                        {% for ch in commit_version %}
                        <option value="{{ ch }}">{{ ch }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group form-group-sm">
                    <label class="sr-only" for="remote">remote</label>
                    <select class="form-control input-sm" id="remote" name="remote">
                        <option value="staging">Staging</option>
                        <option value="production">Production</option>
                    </select>
                </div>
                <div class="form-group form-group-sm">
                    <button type="submit" id="deployCommit" class="btn btn-sm btn-info">Deploy</button>
                </div>
            </form>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading">Deploy List</div>
        <div class="panel-body">
            <table class="table table-striped table-hover table-deploy-list">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Branch</th>
                    <th>Commit Version</th>
                    <th>Deploy Type</th>
                    <th>Host Type</th>
                    <th>Deploy Time</th>
                    <th>Last Update</th>
                    <th>Result</th>
                </tr>
                </thead>
                <tbody>
                {% for m in results %}
                <tr {{ m.result=='success' ? 'text-success' : 'class="text-warning"' }} data-result="{{ m.result }}" data-id="{{ m.id }}">
                    <td>{{ m.id }}</td>
                    <td>{{ m.branch }}</td>
                    <td>{{ m.commit }}</td>
                    <td>{{ m.type }}</td>
                    <td>{{ m.hosttype }}</td>
                    <td>{{ m.time }}</td>
                    <td>{{ m.last_time }}</td>
                    <td>{{ m.result }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{{ include('footer.twig') }}

